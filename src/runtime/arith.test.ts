import { UInt64, Int64 } from "./arith.js";

describe("UInt64", () => {
  it.each([
    [0x5e84c935, 0xcae33d0e, "14619595947299359029"],
    [0x62b3b8b8, 0x93480544, "10612738313170434232"],
    [0x319bfb13, 0xc01c4172, "13843011313344445203"],
    [0x5b8a65fb, 0xa5885b31, "11927883880638080507"],
    [0x6bdb80f1, 0xb0d1b16b, "12741159895737008369"],
    [0x4b82b442, 0x2e0d8c97, "3318463081876730946"],
    [0x780d5208, 0x7d76752c, "9040542135845999112"],
    [0x2e46800f, 0x0993778d, "690026616168284175"],
    [0xf00a7e32, 0xcd8e3931, "14811839111111540274"],
    [0x1baeccd6, 0x923048c4, "10533999535534820566"],
    [0x03669d29, 0xbff3ab72, "13831587386756603177"],
    [0x2526073e, 0x01affc81, "121593346566522686"],
    [0xc24244e0, 0xd7f40d0e, "15561076969511732448"],
    [0xc56a341e, 0xa68b66a7, "12000798502816461854"],
    [0x8738d64d, 0xbfe78604, "13828168534871037517"],
    [0x5baff03b, 0xd7572aea, "15516918227177304123"],
    [0x4a843d8a, 0x864e132b, "9677693725920476554"],
    [0x25b4e94d, 0x22b54dc6, "2500990681505655117"],
    [0x6bbe664b, 0x55a5cc0e, "6171563226690381387"],
    [0xee916c81, 0xb00aabb3, "12685140089732426881"],
  ])("fromString(%s) hi=%s lo=%s", (lo, hi, bigint) => {
    expect(UInt64.fromString(bigint)).toEqual(
      expect.objectContaining({
        lo,
        hi,
        bigint: BigInt(bigint),
      }),
    );
  });
});

describe("Int64", () => {
  it.each([
    [4294967295, 4294967295, "-1"],
    [4294967286, 4294967295, "-10"],
    [10, 0, "10"],
    [3567587328, 232, "1000000000000"],
  ])("fromString(%s) hi=%s lo=%s", (lo, hi, bigint) => {
    expect(Int64.fromString(bigint)).toEqual(
      expect.objectContaining({
        lo,
        hi,
        bigint: BigInt(bigint),
      }),
    );
  });
});
